## 비트마스크
---
내부적으로 이진수를 사용하는 컴퓨터들은 이진법 관련 연산들을 아주 빨리 할 수 있다. 이런 특성을 이용해 정수의 이진수 표현을 자료구조로 쓰는 기법을 
**비트마스트**라고 한다.

### 장점
---
1. 더 빠른 수행 시간: O(1)에 구현되는 것이 많다. 연산을 굉장히 여러 번 수행해야 할 경우, 작은 최적화도 큰 속도 향상을 가져올 수 있다.
2. 간결한 코드: 반복문 없이 한 줄에 쓸 수 있다.
3. 적은 메모리 사용량: 더 많은 데이터를 미리 계산해서 저장해 둘 수 있어 프로그램도 빨라지고, 캐시 효율도 좋다.
4. 연관 배열을 배열로 대체: map<vector<bool>,int>를 int[]로 단순하게 정보를 나타낼 수 있다.  
cf) 연관 배열이란: 자료구조의 하나로, key와 value가 서로 **연관**되어 있으며, key를 통해 연관되는 value를 얻을 수 있다. 맵, 사전으로 부르기도 한다.

### 유의할 점
---
- 연산자 간 우선순위: &,|,^,~ 등의 비트 연산자의 우선순위는 == 혹은 != 등의 비교 연산자보다 낮다. 따라서 가능한 괄호를 자세하게 추가하는 습관을 들이는 것이 좋다.
- 오버플로
- 부호 있는 정수형의 사용: 음수를 나타내는 비트의 경우 MSB가 1인데, 이를 오른쪽으로 시프트할 때, 왼쪽 끝 비트들이 0이 아닌 1로 채워져야 한다는 조건을 지켜야 한다. 
따라서, 변수의 모든 비트를 다 쓰고 싶을 때는 부호 없는 정수형을 쓰는 것이 좋다.
- 시프트 연산: C++에서 N비트 정수를 N비트 이상 왼쪽으로 시프트하는 오류로, 연산의 결과가 0이 아닌 환경에 따라 다른 결과가 나올 수 있다.

### 비트마스크를 이용한 집합 구현
---
1. 공집합과 꽉 찬 집합 구하기
- 공집합: 상수 0
- 꽉 찬 집합: (1<<전체개수)-1 --> 전체 개수만큼의 비트가 1로 켜짐을 나타낸다.
2. 원소 추가하기
- toppings|=(1<<p): p번을 원소에 추가한다.
3. 원소의 포함 여부 확인하기
- toppings&(1<<p): 이 값이 참이면 p번이 포함되어 있다는 것이다. & 연산의 결과값은 **0 또는 1<<p**이므로 이 값이 1이나 true를 반환한다고 생각하고 if문을 잘못 짜면 안된다.
4. 원소의 삭제
- toppings&=~(1<<p)
5. 원소의 토글: 해당 비트가 켜져 있으면 끄고, 꺼져 있으면 켜는 것
- toppings^=(1<<p)

### 두 집합에 대해 연산하기
---
a와 b의 합집합, 차집합 등을 구하기
1. a|b: 합집합
2. a&b: 교집합
3. a&~b: a에서 b를 뺀 차집합
4. a^b: a와 b중 하나에만 포함된 원소들의 집합

### 집합 크기 구하기
---
각 비트를 순회하면서 켜져 있는 비트의 수를 직접 센다.
```
int bitCount(int x){
  if(x==0) return 0;
  return x%2+bitcount(x/2);
 }
```

### 최하위 비트
1. 최하위 비트 구하기
- toppings&-toppings: 컴퓨터가 음수를 표현하기 위해 2의 보수를 이용하므로, -toppings는 toppings에 비트별로 NOT 연산을 적용하고 1을 더한다. 
즉, i번째가 최하위 비트라고 하면, i보다 상위 비트들에는 NOT 연산이 적용된 상태이므로, AND를 하면 최하위 비트만을 얻을 수 있다. 이는 **펜윅 트리**라는 
자료구조에도 유용하게 사용된다.
2. 최하위 비트 지우기
- toppings&=(toppings-1): toppings-1은 toppings에서 켜져 있는 최하위 비트를 끄고, 그 밑의 비트들은 전부 켠 것이다. 따라서 두 값을 AND 연산하면, 
최하위 비트와 그 이하의 비트들은 저부 0이 된다. 이 연산은 __2의 거듭제곱__ 값인지 확인할 때도 유용하게 사용된다. 2의 거듭제곱에서는 켜진 비트가 
하나 밖에 없기 때문에, 최하위 비트를 지웠을 때 0이 된다면 주어진 수는 2의 거듭제곱이다.

### 모든 부분 집합 순회하기
```
for(int subset=pizza; subset; subset=((subset-1)&pizza)){
//subset은 pizza의 부분집합
...
}
```
- subset이 0이 아닐 때까지 for문을 순회하면서 부분집합을 구한다.



